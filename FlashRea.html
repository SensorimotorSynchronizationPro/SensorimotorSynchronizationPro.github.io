<!DOCTYPE html>
<html>
</head>
<!--Basic parameters-->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SMS Flash</title>
<!-- fetch directives are to control locations from which certain resource types may be loaded.-->
<meta http-equiv="Content-Security-Policy" content="
default-src * data: blob: ws: wss: gap://ready file://*;
style-src * 'unsafe-inline';
script-src * 'unsafe-inline' 'unsafe-eval';
connect-src * ws: wss:;" />
<!--Add CSS and js -->

<script src="https://www.html5rocks.com/en/tutorials/webaudio/intro/js/buffer-loader.js"></script>
<link rel="stylesheet" href="Style.css" type="text/css" />
<script type="text/javascript" src="js/FlashReac.js"></script>

<link rel="shortcut icon" href="">


    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-analytics.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>

<script>

</script>
</head>

<body style="background-color:#A6ACAF">

  <!-- Instruction Page -->
  <div id='introEXP' class="container" style="display:''">
    <center><h1 id = 'partinfo'> </h1></center>
      <hr> <p>
         Please check the following detailed instruction. <b><em>NOTE:</em></b>
          There are attention checks, so be sure to read their instructions thoroughly!
        </p>


      <div id="Reation" class="tab" >
        <center><div class="tablinks" >
         <h3><center>Reaction Task</center></h3></div></center>
      </div>
      <div id="SMS" class="tabcontent" >
        <img style ='max-width: 70%;' src="img/FlashRT.PNG" >
          <video id= 'video' controls>
            <source src="media/FlashRT.mp4" type="video/mp4">

        </video>
        <br>
      <b><center>Check the sample video →</center></b>
      </div>
      This test takes up to 5 min.
      <div class="clearfix"></div>

      <p>
          What's the code from the instructions (Reread the instructions if you don't know)：
          <input id="Code" type="text" value="">
      </p>
          <center>
          <button class="button" onClick="Initiate()">
          Start experiment
          </button>
          </center>
  </div>

  <!-- Process bar + Rest + Stumuli -->
  <div id="myProgress" style="display:none;">
    <div id="myBar"> Progress </div>
  </div>
  <div class = 'exp'   id = 'rest' style="display:none;">
   <div id = 'Wrong' style="display:none;">
     Please wear your headphone or earphone and choose the word correctly!
  </div>
  <div id = 'Correct' style="display:none;">
    You chose the correct word!
   </div >
  <div id = 'restreport'>
  </div>
  </div>
  <canvas id="myCanvas" width="480" height="309" style="display:none"></canvas>


   <!-- Reaction block -->
  <div class = 'exp' id = 'RTintro_prac' style="display:none;">
    <center>
    <h3> <span style="color: #AE1B2D ">Reaction Task</span></h3>
    <br>
       <p>
        <br>  When the dot appears, press the <b><span style="color: #AE1B2D ">M bar as quickly as you can</span></b>.
         <br>There are 2 trials in total. Between each trial, you will get a 5-sec short rest.<br> <br>

      <p> Press Enter to start practice </p>
    </center>
  </div>
  <div class = 'exp'   id = 'RTintro' style="display:none;">
      <center>
    <h3> <span style="color: #AE1B2D ">Reaction Task</span></h3>
    <br> <br>
    <p> Press enter to Continue </p>
      </center>
  </div>


   <!-- Thanks Page + FinalPage + QuitPage1 -->
  <div class = 'exp'   id = 'ThanksPage' style="display:none;">
       <center>
     <p>Your response have been saved :) <br>
       Your completion code is: 65BBB4E5. <br>
     <br>If you do not receive compensation in 5 business days please email liuyuelin@pku.edu.cn.</p>

     <p>Hope you have a wonderful life.</p>
       </center>
   </div>
  <div class = 'exp'   id = 'QuitPage1' style="display:none;">
       <center>
         <h3>Oh no!</h3>
         <hr />
         <p>If you are seeing this page it means you did not pass an attention or understanding task.</p>
         <p>This task requires your full attention, thus we kindly ask you to exit and return this study.</p>
         <p>You can also refresh the page to restart this experiment.</p>
         <p>We're sorry for this inconvenience.</p><center>
    </div>
  <div class = 'exp'  id="FinalPage1" style="display:none">
        <div class="media-body">
            <p id="finishpart"> </p>
            <hr />
            <center>
              <p>  Please tell us how easy/difficult you feel about this task:</p>
              <div class="slidecontainer">
                Easy   <input type="range" min="1" max="100" value="50" class="slider" id="ReactQ">  Difficult
                <br>
              </div>
              <br><br><br>
                <button type="button" id="end" value="final" onClick="saveFeedback1();">Continue</button>
            </center>
        </div>
    </div>
  <div class = 'exp'  id="FinalPage2" style="display:none">
        <div class="media-body">
            <h3>Thanks for your participation for the whole experiment!</h3>
              <hr />
            <p>
                    Let us know if you had any issues/comments with this experiment!
                    <br> <input id="feedback2" type="text" name="feedback" value="">
           </p>


            <center>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" id="end" value="final" onClick="saveFeedback2();">
                    Submit
                </button>
            </center>
        </div>
    </div>

</body>
<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var circle = ({
    x: canvas.width/2,
    y: canvas.height/2,
    radius: 36,
    color: "black",
    visibleDuration: 100,
    visibleCountdown: 0,
});


//get subjID
var subjectid =window.location.href.split('?')[1];
document.getElementById('partinfo').innerHTML ="Task "+ subjectid.charAt(subjectid.length-1);
document.getElementById('finishpart').innerHTML ='You have finished this test.' ;
// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
var firebaseConfig = {
  apiKey: "AIzaSyA9b7mI94Ah5SZbUNrrmTMDLp9dtvD1XB8",
  authDomain: "sensorimotorsychronization-vf.firebaseapp.com",
  projectId: "sensorimotorsychronization-vf",
  storageBucket: "sensorimotorsychronization-vf.appspot.com",
  messagingSenderId: "157058862387",
  appId: "1:157058862387:web:0179c8ef17990d6a650246",
  measurementId: "G-G7C9HRPL9Y"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
firebase.analytics();
// create db for database func
const db=firebase.firestore();
db.settings({timestampsInSnapshots: true});
</script>
</html>
