<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!--Basic parameters-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SMS Auditory</title>
    <!-- fetch directives are to control locations from which certain resource types may be loaded.-->
    <meta http-equiv="Content-Security-Policy" content="
    default-src * data: blob: ws: wss: gap://ready file://*;
    style-src * 'unsafe-inline';
    script-src * 'unsafe-inline' 'unsafe-eval';
    connect-src * ws: wss:;" />

    <link rel="shortcut icon" href="">

    <!--Add CSS and js -->
    <link rel="stylesheet" href="Style.css" type="text/css" />
    <script type="text/javascript" src="js\AuditoryContin.js"></script>
    <script src="https://www.html5rocks.com/en/tutorials/webaudio/intro/js/buffer-loader.js"></script>

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>
        <!-- TODO: Add SDKs for Firebase products that you want to use
             https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-analytics.js"></script>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>


</head>

<body style="background-color:#A6ACAF">

  <!-- Instruction Page -->
  <div id='introEXP' class="container" style="display:''">
    <center><h1 id = 'partinfo'> </h1></center>
      <hr>
        <p> This experiment part contains two tasks: <b><span style="color: #AE1B2D ">
          1). a sensorimotor synchronization task and 2). a reaction task.
      </span>  </b> <br>
         Please check the following detailed instruction for each task. <b><em>NOTE:</em></b>
          There are attention checks, so be sure to read their instructions thoroughly!
          Failing these checks will result in an incomplete HIT!

      <div id="Sychronization" class="tab" >
        <center><div class="tablinks" >
         <h3>Sensorimotor Synchronization Task</h3></div></center>
      </div>
      <div id="SMS" class="tabcontent">
        <video id= 'video2' controls>
            <source src="media/AuditorySYC.mp4" type="video/mp4">
          </video>

          <img src="img/AuditorySYC.png" width=80%>
          <p><br><b>Check the sample video →</b></p>

      </div>

      <div id="Reation" class="tab" >
        <center><div class="tablinks" >
         <h3><center>Reaction Task</center></h3></div></center>
      </div>
      <div id="RT" class="tabcontent">
        <video id= 'video1' controls>
            <source src="media/AuditoryRT.mp4" type="video/mp4">
          </video>

  <img src="img/AuditoryRT.png"  width=80%>
          <p>  <br><b>Check the sample video →</b></p>

      </div>

      <div class="clearfix"></div>

    <br>
          What's the code from the instructions (Reread the instructions if you don't know)：
          <input id="Code" type="text" value="">
      <br>
      <br>

          <center>
          <button class="button" onClick="Initiate()">
          Start practice
          </button>
          </center>
  </div>

  <!-- Process bar + Rest + Stumuli -->
  <div id="myProgress" style="display:none;">
    <div id="myBar"> Progress </div>
  </div>
  <div class = 'exp'   id = 'rest' style="display:none;">  </div>
  <div class = 'exp'   id = 'speaker' style="display:none;">
    <img src="img/speaker.png" width="50" height="60">
  </div>

  <!-- Reaction block -->
   <div class = 'exp' id = 'RTintro_prac' style="display:none;">
     <center>
     <h3> <span style="color: #AE1B2D ">Reaction Task </span></h3>
     <br>
        <p>
          <br> When you hear each <b><span style="color: #AE1B2D "> pitch truning point</span></b>,
          press the <b><span style="color: #AE1B2D ">M bar </span></b>as quickly as you can.<br>
        There are 4 trials in total. Between each trial, you will get a 5-sec short rest.<br></p>
          <img src="img/RT.png"  width=80%>
          <br><br>
       <p> Press Enter to start practice </p>
     </center>
   </div>
   <div class = 'exp' id = 'RTintro' style="display:none;">
       <center>
     <h3><span style="color: #AE1B2D "> Reaction Task</span> </h3>
     <br> <br>
     <p> Press enter to Continue </p>
       </center>
   </div>

   <!-- Sychronization block -->
   <div class = 'exp'   id = 'SYCintro_prac' style="display:none;">
       <center>
     <h3> <span style="color: #AE1B2D ">Synchronization Task</span></h3>
     <p> You need to tap along the <b><span style="color: #AE1B2D ">highest and lowest picth </span></b>
       by pressing the <b><span style="color: #AE1B2D ">M bar </span></b> .
     <br> There are 20 trials in total. Between each trial, you will get a 5-sec short rest.<br></p>
     <img src="img/SYC.png"  width=80% >
     <br><br>
     <p> Press Enter to start practice </p>
       </center>
   </div>
   <div class = 'exp'   id = 'SYCintro' style="display:none;">
       <center>
     <h3><span style="color: #AE1B2D "> Synchronization Task</span></h3>
     <br><br>
     <p> Press enter to Continue </p>
       </center>
   </div>

   <!-- Thanks Page + FinalPage + QuitPage1 -->
    <div class = 'exp'   id = 'ThanksPage' style="display:none;">
        <center>
      <p>Your response have been saved :) Your completion code is: 65BBB4E5. <br>
      <br>If you do not receive compensation in 10 business days please email liuyuelin@pku.edu.cn.</p>

      <p>Hope you have a wonderful life.</p>
        </center>
    </div>
    <div class = 'exp'   id = 'QuitPage1' style="display:none;">
        <center>
          <h3>Oh no!</h3>
          <hr />
          <p>If you are seeing this page it means you did not pass an attention or understanding task.</p>
          <p>This task requires your full attention, thus we kindly ask you to exit and return this study.</p>
          <p>You can also refresh the page to restart this experiment.</p>
          <p>We're sorry for this inconvenience.</p><center>
     </div>
     <div class = 'exp'  id="FinalPage1" style="display:none">
        <div class="media-body">
            <p id="finishpart"> </p>
            <hr />
            <center>
                <button type="button" id="end" value="final" onClick="saveFeedback();">Continue</button>
            </center>
        </div>
    </div>
  <div class = 'exp'  id="FinalPage2" style="display:none">
         <div class="media-body">
             <h3>Thanks for your participation for this experiment!</h3>
             <hr />
             <p>Before finishing, we have two questions.<br>
             1. For you, taping to <select id="pitch" name="gender">
                                 <option value=""></option>
                                 <option value="1">Highest</option>
                                 <option value="2">Lowest</option>
                                 <option value="0">Both</option>
                             </select>
                              picth is easier.<br>
             2. For you, taping to <select id="tempo" name="gender">
                                 <option value=""></option>
                                 <option value="1">Slow</option>
                                 <option value="2">Fast</option>
                                 <option value="0">Both</option>
                             </select> rhythm is easier.<br>
             <p> Let us know if you had any issues/comments with this experiment!
                     <br> <input id="feedback2" type="text" name="feedback" value="">
            </p>


             <center>

                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                 <button type="button" id="end" value="final" onClick="saveFeedback();">
                     Submit
                 </button>
             </center>
         </div>
     </div>
</body>

<script>

//get subjID
var subjectid =window.location.href.split('?')[1];
document.getElementById('partinfo').innerHTML ="Part "+subjectid.charAt(subjectid.length-1) + ' Sensorimotor Synchronization';
document.getElementById('finishpart').innerHTML ='You have finished this part :)';

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAOt2wFN_BQtUIPzepiJRegMu9HlitHbhQ",
  authDomain: "sms-timeperception.firebaseapp.com",
  projectId: "sms-timeperception",
  storageBucket: "sms-timeperception.appspot.com",
  messagingSenderId: "865405917294",
  appId: "1:865405917294:web:c3f888c3501894d0966e7f",
  measurementId: "G-0DS7WRR065"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
firebase.analytics();
// create db for database func
const db=firebase.firestore();
db.settings({timestampsInSnapshots: true});
</script>



</html>
